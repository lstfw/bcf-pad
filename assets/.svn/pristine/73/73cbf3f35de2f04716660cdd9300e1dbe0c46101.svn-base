cc.Class({
    extends: cc.Component,

    properties: {
        minusBtn: cc.Button,
        plusBtn: cc.Button,
        betInfo: cc.Label,
        multipleLabel: cc.Label,
        k8module: cc.Node,
        PK10module: cc.Node,
        multipleNum: 1,
        betNum: 0,
        price: 2
    },

    // use this for initialization
    onLoad: function () {

        this.betInfo.string = this.multipleNum + "倍" + this.betNum + "注" + "共" + (this.multipleNum * this.betNum * this.price) + "元";
        this.minusBtn.node.on('touchend', this.onBetMinus, this);
        this.plusBtn.node.on('touchend', this.onBetPlush, this);

    },

    //增加倍数
    onBetPlush: function (event) {
        if (this.multipleNum >= 99) {
            return
        } else {
            this.multipleNum++;
            this.multipleLabel.string = this.multipleNum + "倍"
            this.betInfo.string = this.multipleNum + "倍" + this.betNum + "注" + "共" + (this.multipleNum * this.betNum * this.price) + "元";
        }
        this.setBetNumInfo();
    },

    //减少倍数
    onBetMinus: function (event) {
        if (this.multipleNum <= 1) {
            return
        } else {
            this.multipleNum--;
            this.multipleLabel.string = this.multipleNum + "倍"
            this.setBetNumInfo();
        }
    },
    //刷新注数
    setBetNumInfo: function () {
        this.betInfo.string = this.multipleNum + "倍" + this.betNum + "注" + "共" + (this.multipleNum * this.betNum * this.price) + "元";
    },
    //投注逻辑处理
    onBet: function (betVo) {
        cc.log("betData" + betVo.infos);
    },


    //3D玩法   1D  投注金额以及注数 计算   通过
    bet3D_1d: function (data) {
        //每位选中号码个数
        var bwL = data.baiwei.length,
            swL = data.shiwei.length,
            gwL = data.gewei.length
        this.betNum = bwL + swL + gwL;
        this.setBetNumInfo();
    },

    //3D玩法   2D  投注金额以及注数 计算   通过
    bet3D_2d: function (data) {
        //每位选中号码个数
        var bwL = data.baiwei.length,
            swL = data.shiwei.length,
            gwL = data.gewei.length

        if (bwL != 0 && swL != 0 && gwL == 0) {
            this.betNum = bwL * swL
            this.setBetNumInfo();

        } else if (bwL != 0 && swL == 0 && gwL != 0) {
            this.betNum = bwL * gwL
            this.setBetNumInfo();

        } else if (bwL == 0 && swL != 0 && gwL != 0) {
            this.betNum = gwL * swL
            this.setBetNumInfo();

        } else if (bwL != 0 && swL != 0 && gwL != 0) {
            this.betNum = gwL * swL + bwL * gwL + bwL * swL
            this.setBetNumInfo();
        } else {
            this.betNum = gwL * swL * bwL
            this.setBetNumInfo();
        }


    },

    //3D玩法   通选 直选  投注金额以及注数 计算   通过
    bet3D_Zx: function (data) {
        //每位选中号码个数
        var bwL = data.baiwei.length,
            swL = data.shiwei.length,
            gwL = data.gewei.length
        if (bwL != 0 && swL != 0 && gwL != 0) {
            this.betNum = gwL * swL * bwL
            this.setBetNumInfo();
        } else {
            this.betNum = 0;
            this.setBetNumInfo();
        }
    },

    //组三   验证通过
    bet3D_Zs: function (data) {
        //每位选中号码个数
        var bwL = data.baiwei.length;
        if (bwL != 0 && bwL > 1) {
            this.betNum = bwL * (bwL - 1);
            this.setBetNumInfo();
        } else {
            this.betNum = 0;
            this.setBetNumInfo();
        }
    },


    //组六
    bet3D_Zl: function (data) {
        //每位选中号码个数
        var bwL = data.baiwei.length;
        var r = bwL;
        var d = 3
        var upIndex = 1;
        var downIndex = 1;
        for (var i = r; i > r - d; i--) {
            upIndex *= i;
        }
        for (var i = d; i > 0; i--) {
            downIndex *= i;
        }
        this.betNum = upIndex / downIndex;
        this.setBetNumInfo();
    },


    //复选三
    bet3D_Fxs: function (data) {
        //每位选中号码个数
        var bwL = data.baiwei.length,
            bgL = data.gewei.length;

        if (bwL != 0 && bgL != 0) {
            this.betNum = 3;
            this.setBetNumInfo();
        } else {
            this.betNum = 0;
            this.setBetNumInfo();
        }
    },


    //复选六    验证通过
    bet3D_Fxl: function (data) {
        //每位选中号码个数
        var bwL = data.baiwei.length;
        if (bwL != 0 && bwL > 2) {
            this.betNum = bwL * 2;
            this.setBetNumInfo();
        } else {
            this.betNum = 0;
            this.setBetNumInfo();
        }
    },

    //和组  通过
    bet3D_Hz: function (data) {
        //每位选中号码个数
        var data = data.baiwei;
        var bwL = data.length;
        if (bwL > 0) {
            for (var i = 0; i < bwL; i++) {
                var nun = data[i];
                if (nun == 1 || nun == 26) {
                    this.betNum = this.betNum + 1;
                } else if (nun == 2 || nun == 3 || nun == 24 || nun == 25) {
                    this.betNum = this.betNum + 2;
                } else if (nun == 4 || nun == 23) {
                    this.betNum = this.betNum + 4;
                } else if (nun == 5 || nun == 22) {
                    this.betNum = this.betNum + 5;
                } else if (nun == 6 || nun == 21) {
                    this.betNum = this.betNum + 6;
                } else if (nun == 7 || nun == 20) {
                    this.betNum = this.betNum + 8;
                } else if (nun == 8 || nun == 19) {
                    this.betNum = this.betNum + 10;
                } else if (nun == 9 || nun == 18) {
                    this.betNum = this.betNum + 11;
                } else if (nun == 10 || nun == 17) {
                    this.betNum = this.betNum + 13;
                } else if (nun == 12 || nun == 11 || nun == 15 || nun == 16) {
                    this.betNum = this.betNum + 14;
                } else if (nun == 13 || nun == 14) {
                    this.betNum = this.betNum + 15;
                }
            }
            this.setBetNumInfo();
            this.betNum = 0;
        } else {
            this.betNum = 0;
            this.setBetNumInfo();
        }


    },


    //包号
    bet3D_BxD: function (data) {
        //每位选中号码个数
        var bwL = data.baiwei.length,
            swL = data.shiwei.length,
            gwL = data.gewei.length
        if (bwL != 0 && swL == 0 && gwL == 0) {
            this.betNum = 100
            this.setBetNumInfo();
        } else if (bwL == 0 && swL != 0 && gwL == 0) {
            this.betNum = 100
            this.setBetNumInfo();
        } else if (bwL == 0 && swL == 0 && gwL != 0) {
            this.betNum = 100
            this.setBetNumInfo();
        } else if (bwL != 0 && swL != 0 && gwL == 0) {
            this.betNum = 10
            this.setBetNumInfo();
        } else if (bwL != 0 && swL == 0 && gwL != 0) {
            this.betNum = 10
            this.setBetNumInfo();
        } else if (bwL == 0 && swL != 0 && gwL != 0) {
            this.betNum = 10
            this.setBetNumInfo();
        } else {
            this.betNum = 0;
            this.setBetNumInfo();
        }
    },


    //快乐8注数算法
    //号码玩法  任选1


    //数据组合算法
    zhSf: function (data, d) {
        var r = data.length;
        var upIndex = 1;
        var downIndex = 1;
        for (var i = r; i > r - d; i--) {
            upIndex *= i;
        }
        for (var i = d; i > 0; i--) {
            downIndex *= i;
        }
        this.betNum = upIndex / downIndex;
        this.setBetNumInfo();
    },

   /* //长度组合算法
    zhLSf: function (n) {
        var upIndex = 1;
        for ( var i = n; i >= 1; i--) {
            upIndex *= i;
        }
        this.betNum = upIndex;
        this.setBetNumInfo();
    },*/
    //清空注数
    setBetNub: function (n) {
        if (n) {
            this.betNum = n;
        } else {
            this.betNum = 0;
        }
        this.setBetNumInfo();
    },

    //立即投注快8各个玩法提示
    selectNumButtonK8Tip: function () {
        var k8module = this.k8module.getComponent('k8');
        var seedWFType = k8module.betType[0],
            seedXWFType = k8module.betType[1];
        if (this.betNum == 0) {

            if (seedWFType == 0) {
                //号码投注
                for (var i = 0; i < seedXWFType + 1; i++) {
                    if (seedXWFType == i) {
                        k8module.tipShow('最少选择' + (i + 1) + '个号码投注');
                    }
                }
            } else if (seedWFType == 1) {
                //幸运号
                for (var i = 0; i < seedXWFType + 1; i++) {
                    if (seedXWFType == i && i < 6) {
                        k8module.tipShow('最少选择' + (i + 1) + '个号码投注');
                    }
                }
                if (seedXWFType == 6) {
                    k8module.tipShow('请选择1行号码进行投注');
                } else if (seedXWFType == 7) {
                    k8module.tipShow('请选择1列号码进行投注');
                } else if (seedXWFType == 8) {
                    k8module.tipShow('请选择2行号码进行投注');
                } else if (seedXWFType == 9) {
                    k8module.tipShow('请选择2列号码进行投注');
                }

            } else if (seedWFType == 2) {
                //全不中
                if (seedXWFType == 0) {
                    k8module.tipShow('请选择6个号码进行投注');
                } else if (seedXWFType == 1) {
                    k8module.tipShow('请选择8个号码进行投注');
                } else if (seedXWFType == 2) {
                    k8module.tipShow('请选择2个号码进行投注');
                } else if (seedXWFType == 3) {
                    k8module.tipShow('请选择12个号码进行投注');
                }

            } else {
                //大小
                k8module.tipShow('请选择1注号码进行投注');
            }
        } else {
            k8module.tipShow('投注成功');
        }
    }


});