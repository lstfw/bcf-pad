var dataConfig = require('DataConfig');


cc.Class({
    extends: cc.Component,
    properties: {
        choiceItem: cc.Prefab
    },

    onLoad: function () {
        var choiceData = dataConfig.choiceData,
            xzkData = dataConfig.xzkData
        this.items = [];
        for (var i = 0; i < 11/*choiceData.length*/; ++i) {
            var item = cc.instantiate(this.choiceItem);
            this.addEventBtn(item);
            if (i === 6) {
                item.getComponent('choiceItem').init(choiceData[i], xzkData[1]);

            } else {
                item.getComponent('choiceItem').init(choiceData[i], xzkData[0]);
            }
            this.items.push(item);

            this.node.addChild(item);
        }

    },
    addEventBtn: function (item) {
        var self = this
        item.on('touchend', function (event) {
            var choiceItem = event.target.getComponent('choiceItem');
            var id = choiceItem.id;
            self.clearBorder()
            choiceItem.route(id);
        }, this);
    },


    clearBorder: function () {
        var xzkData = dataConfig.xzkData;
        for (var i = 0; i < this.items.length; i++) {
            this.items[i].getComponent('choiceItem').setNewImg(xzkData[0]);
        }
    }


});
